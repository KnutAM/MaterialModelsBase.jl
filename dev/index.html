<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · MaterialModelsBase.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://KnutAM.github.io/MaterialModelsBase.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>MaterialModelsBase.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Basic-usage"><span>Basic usage</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="stressiterations/">Stress states</a></li><li><a class="tocitem" href="differentiation/">Differentiation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/master/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="[MaterialModelsBase](https://github.com/KnutAM/MaterialModelsBase.jl)"><a class="docs-heading-anchor" href="#[MaterialModelsBase](https://github.com/KnutAM/MaterialModelsBase.jl)"><a href="https://github.com/KnutAM/MaterialModelsBase.jl">MaterialModelsBase</a></a><a id="[MaterialModelsBase](https://github.com/KnutAM/MaterialModelsBase.jl)-1"></a><a class="docs-heading-anchor-permalink" href="#[MaterialModelsBase](https://github.com/KnutAM/MaterialModelsBase.jl)" title="Permalink"></a></h1><p>The main purpose of this package is to provide a unifying interface,  facilitating the interchanging of material models between researchers.  The basic idea, is to write packages (e.g. finite element simulations),  that rely only on <code>MaterialModelsBase.jl</code>. It will then be easy to run different material models written by other researchers, to check if your  implementation is correct or to evaluate different material models. </p><h2 id="Basic-usage"><a class="docs-heading-anchor" href="#Basic-usage">Basic usage</a><a id="Basic-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-usage" title="Permalink"></a></h2><p>This section describes how to use a material model defined according to the described interface.  For this example, we will use the case <code>TestMaterials</code> module used for testing purposes (see <code>test/TestMaterials.jl</code> in the main repo). Hence, replace <code>TestMaterials</code> with the specific material model package(s) you wish to use. </p><p>Use the required modules and define your material according to the specification</p><pre><code class="language-julia hljs">using MaterialModelsBase, TestMaterials, Tensors
G1=80.e3; G2=8.e3; K1=160.e3; K2=16.e3; η=1000.0
material = ViscoElastic(LinearElastic(G1,K1), LinearElastic(G2,K2), η)</code></pre><p>As one who will run a code (e.g. a finite element solver or a material point simulator) that someone else have written, this is all that needs to be done.  If we would write a material point simulator, we also need to instantiate the material state, and optionally the cache. </p><pre><code class="language-julia hljs">state = initial_material_state(material)
cache = get_cache(material)</code></pre><p>Now, we can loop through the time history, let&#39;s say we want to simulate the uniaxial stress case:</p><pre><code class="language-julia hljs">stress_state = UniaxialStress() 
ϵ11_vector = collect(range(0, 0.01; length=100))   # Linear ramp
Δt = 1.e-3                                  # Fixed time step
for ϵ11 in ϵ11_vector
    ϵ11_tensor = SymmetricTensor{2,1}(ϵ11)
    σ, dσdϵ, state, ϵ_full = material_response(stress_state, material, ϵ11_tensor, state, Δt, cache)
end</code></pre><p>where <code>σ</code> and <code>dσdϵ</code> are the reduced outputs for the given <code>stress_state</code> (in this case dimension 1). The <code>state</code> is not directly affected by the <code>stress_state</code>, and the <code>ϵ_full</code> gives the full strain tensor, such that </p><pre><code class="language-julia hljs">σ, dσdϵ, state = material_response(material, ϵ_full, old_state, Δt, cache)</code></pre><p>gives the full stress and stiffness, adhering to the constraint imposed by the <code>stress_state</code>.  Note that in the latter function call, no <code>stress_state</code> was given, and then no <code>ϵ_full</code> output was given either. </p><p>If the stress iterations would not converge, a  <code>NoStressConvergence&lt;:MaterialConvergenceError</code>  exception is thrown. The package also contains the exception  <code>NoLocalConvergence&lt;:MaterialConvergenceError</code>, which should be thrown from inside implemented material routines to signal  that something didn&#39;t converge and that the caller should consider  to e.g. reduce the time step or handel the issue in some other way. </p><h3 id="Advanced-use-cases"><a class="docs-heading-anchor" href="#Advanced-use-cases">Advanced use cases</a><a id="Advanced-use-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-use-cases" title="Permalink"></a></h3><p>The package also provides an interface for converting <code>AbstractMaterial</code>s  to a vector of material parameters and vice versa. However, to implement  this part of the interface is not required, if only the standard usage  is intended for your material model.</p><p>Building upon that option, it is also possible to define differentiation of the material response wrt. to the material parameters, which is useful  for parameter identification using gradient based methods. For further details,  see <a href="differentiation/#Differentation-of-a-material">Differentation of a material</a>.</p><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><p>The main function is the <code>material_response</code> function that  primarly dispatches on the <code>AbstractMaterial</code> input type. </p><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.material_response" href="#MaterialModelsBase.material_response"><code>MaterialModelsBase.material_response</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">material_response(
    [stress_state::AbstractStressState],
    m::AbstractMaterial, 
    strain::Union{SecondOrderTensor,Vec}, 
    old::AbstractMaterialState, 
    Δt::Union{Number,Nothing}=nothing, 
    cache::AbstractMaterialCache=get_cache(m), 
    extras::AbstractExtraOutput=NoExtraOutput(); 
    options::Dict=Dict{Symbol}()
    )</code></pre><p>Calculate the stress/traction, stiffness and updated state variables  for the material <code>m</code>, given the strain input <code>strain</code>.</p><p><strong>Mandatory arguments</strong></p><ul><li><code>m</code>: Defines the material and its parameters</li><li>The second <code>strain</code> input can be, e.g.<ul><li><code>ϵ::SymmetricTensor{2}</code>: The total small strain tensor at the end of the increment</li><li><code>F::Tensor{2}</code>: The total deformation gradient at the end of the increment</li><li><code>u::Vec</code>: The deformation at the end of the increment (for cohesive elements)</li></ul></li><li><code>old::AbstractMaterialState</code>: The material state variables at the end of the last   converged increment. The material initial material state can be obtained by   the <a href="#MaterialModelsBase.initial_material_state"><code>initial_material_state</code></a> function.</li></ul><p><strong>Optional positional arguments</strong></p><ul><li><code>stress_state</code>: Use to solve for a reduced stress state, e.g. PlaneStress.   See <a href="stressiterations/#Stress-states">Stress states</a>.</li><li><code>Δt</code>: The time step in the current increment. Defaults to <code>nothing</code>. </li><li><code>cache::AbstractMaterialCache</code>: Cache variables that can be used to avoid allocations during each call to the <code>material_response</code> function.  This can be created by the <a href="#MaterialModelsBase.get_cache"><code>get_cache</code></a> function.</li><li><code>extras</code>: Updated with requested extra output.  Defaults to the empty struct <code>NoExtraOutput</code></li></ul><p><strong>Optional keyword arguments</strong></p><ul><li><code>options</code>: Additional options that may be specific for each material.  This is also used for stress iterations, see <a href="stressiterations/#Stress-states">Stress states</a>.</li></ul><p><strong>Outputs</strong></p><ol><li><code>stress</code>, is the stress measure that is energy conjugated to the <code>strain</code> (2nd) input.</li><li><code>stiffness</code>, is the derivative of the <code>stress</code> output wrt. the <code>strain</code> input. </li><li><code>new_state</code>, are the updated state variables</li><li><code>strain</code>, is only available if <code>stress_state</code> is given and returns the full strain tensor</li></ol><p>The following are probably the three most common <code>strain</code> and <code>stress</code> pairs:</p><ul><li>If the second input is the deformation gradient <span>$\boldsymbol{F}$</span> (<code>F::Tensor{2}</code>)`, the outputs are<ul><li><code>P::Tensor{2}</code>: First Piola-Kirchhoff stress, <span>$\boldsymbol{P}$</span></li><li><code>dPdF::Tensor{4}</code>: Algorithmic tangent stiffness tensor, <span>$\mathrm{d}\boldsymbol{P}/\mathrm{d}\boldsymbol{F}$</span></li></ul></li><li>If the second input is the small strain tensor, <span>$\boldsymbol{\epsilon}$</span> (<code>ϵ::SymmetricTensor{2}</code>), the outputs are<ul><li><code>σ::SymmetricTensor{2}</code>: Cauchy stress tensor, <span>$\boldsymbol{\sigma}$</span></li><li><code>dσdϵ::SymmetricTensor{4}</code>: Algorithmic tangent stiffness tensor, <span>$\mathrm{d}\boldsymbol{\sigma}/\mathrm{d}\boldsymbol{\epsilon}$</span></li></ul></li><li>If the second input is deformation vector, <span>$\boldsymbol{u}$</span> (<code>u::Vec</code>), the outputs are<ul><li><code>t::Vec</code>: Traction vector, <span>$\boldsymbol{t}$</span></li><li><code>dtdu::SecondOrderTensor</code>: Algorithmic tangent stiffness tensor, <span>$\mathrm{d}\boldsymbol{t}/\mathrm{d}\boldsymbol{u}$</span></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L28-L83">source</a></section></article><p>Additionally, the following types and functions could be defined for a material</p><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.initial_material_state" href="#MaterialModelsBase.initial_material_state"><code>MaterialModelsBase.initial_material_state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">initial_material_state(m::AbstractMaterial)</code></pre><p>Return the (default) initial <code>state::AbstractMaterialState</code>  of the material <code>m</code>. </p><p>Defaults to the empty <code>NoMaterialState()</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L87-L94">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.get_cache" href="#MaterialModelsBase.get_cache"><code>MaterialModelsBase.get_cache</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_cache(m::AbstractMaterial)</code></pre><p>Return a <code>cache::AbstractMaterialCache</code> that can be used when  calling the material to reduce allocations</p><p>Defaults to the empty <code>NoMaterialCache()</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L103-L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.AbstractExtraOutput" href="#MaterialModelsBase.AbstractExtraOutput"><code>MaterialModelsBase.AbstractExtraOutput</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractExtraOutput()</code></pre><p>By allocating an <code>AbstractExtraOutput</code> type, this type can be mutated to extract additional information from the internal calculations  in <code>material_response</code> only in cases when this is desired.  E.g., when calculating derivatives or for multiphysics simulations. The concrete <code>NoExtraOutput&lt;:AbstractExtraOutput</code> exists for the case when no additional output should be calculated. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L119-L128">source</a></section></article><p>Finally, the following exceptions are included</p><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.MaterialConvergenceError" href="#MaterialModelsBase.MaterialConvergenceError"><code>MaterialModelsBase.MaterialConvergenceError</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MaterialConvergenceError</code></pre><p>Can be used to catch errors related to the material not converging. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L137-L141">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.NoLocalConvergence" href="#MaterialModelsBase.NoLocalConvergence"><code>MaterialModelsBase.NoLocalConvergence</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NoLocalConvergence(msg::String)</code></pre><p>Throw if the material_response routine doesn&#39;t converge internally</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L146-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MaterialModelsBase.NoStressConvergence" href="#MaterialModelsBase.NoStressConvergence"><code>MaterialModelsBase.NoStressConvergence</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NoStressConvergence(msg::String)</code></pre><p>This is thrown if the stress iterations don&#39;t converge, see <a href="stressiterations/#Stress-states">Stress states</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/MaterialModelsBase.jl/blob/dd69159bd7b85c34acb3fadf19d8dfe40e559711/src/MaterialModelsBase.jl#L155-L159">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="stressiterations/">Stress states »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.17 on <span class="colophon-date" title="Wednesday 11 January 2023 14:41">Wednesday 11 January 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
